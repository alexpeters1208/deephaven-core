<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rdeephaven">
<title>Overview of the Deephaven Core R Client • rdeephaven</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Overview of the Deephaven Core R Client">
<meta property="og:description" content="rdeephaven">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rdeephaven</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.31.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/rdeephaven.html">Overview</a>
    <a class="dropdown-item" href="../articles/agg_by.html">Aggregations with agg_by</a>
    <a class="dropdown-item" href="../articles/update_by.html">Moving Operations with update_by</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="rdeephaven_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Overview of the Deephaven Core R Client</h1>
            
      
      
      <div class="d-none name"><code>rdeephaven.Rmd</code></div>
    </div>

    
    
<p>The Deephaven Core R Client provides an R interface to Deephaven’s powerful real-time data engine, <a href="https://deephaven.io/community/" class="external-link"><em>Deephaven Core</em></a>. To use this package, you must have a Deephaven server running and be able to connect to it. For more information on how to set up a Deephaven server, see the documentation <a href="https://deephaven.io/core/docs/tutorials/quickstart/" class="external-link">here</a>.</p>
<div class="section level2">
<h2 id="building-blocks-of-the-deephaven-r-client">Building blocks of the Deephaven R Client<a class="anchor" aria-label="anchor" href="#building-blocks-of-the-deephaven-r-client"></a>
</h2>
<p>There are two primary R classes that make up the Deephaven R Client, the <code>Client</code> class and the <code>TableHandle</code> class. See <code><a href="../reference/Client.html">?Client</a></code> and <code><a href="../reference/TableHandle.html">?TableHandle</a></code> for more information. The Client class is used to establish a connection to the Deephaven server with its constructor <code>Client$new()</code>, and to send server requests, such as running a script via <code>run_script()</code>, or pushing local data to the server via <code>import_table()</code>. Basic usage of the Client class may look something like this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">rdeephaven</span><span class="op">)</span></span>
<span><span class="va">client</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Client.html">Client</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"localhost:10000"</span>, auth_type <span class="op">=</span> <span class="st">"psk"</span>, auth_token <span class="op">=</span> <span class="st">"my_secret_token"</span><span class="op">)</span></span></code></pre></div>
<p>Many of these server requests end up creating or modifying tables that live on the server. To keep track of these tables, the R client retrieves references to them, and wraps these references in TableHandle objects. These TableHandles have a host of methods that mirror server-side table operations, such as <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code>, <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail()</a></code>, <code>update_by()</code>, and so on. So, you can typically use TableHandles <em>as if</em> they are tables themselves, and all of the corresponding methods that you call on them will be executed on the server. Here is a simple example of pushing data to the server, retrieving a TableHandle to the resulting table, and applying some basic table operations to the table:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, y <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span>
<span><span class="va">th1</span> <span class="op">&lt;-</span> <span class="va">client</span><span class="op">$</span><span class="fu">import_table</span><span class="op">(</span><span class="va">df1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">th2</span> <span class="op">&lt;-</span> <span class="va">th1</span><span class="op">$</span></span>
<span>  <span class="fu">update</span><span class="op">(</span><span class="st">"z = x + y"</span><span class="op">)</span><span class="op">$</span></span>
<span>  <span class="fu">where</span><span class="op">(</span><span class="st">"z % 4 == 0"</span><span class="op">)</span></span></code></pre></div>
<p>TableHandles also support common functional methods for converting server-side Deephaven tables to R objects stored in local memory such as <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code>, <code>as_tibble()</code>, and <code>as_arrow_table()</code>. Here’s an example of converting the table created above to an R data frame and verifying that other functional methods work as expected:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">th2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">th2</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">df2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">th2</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">df2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">th2</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">df2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">th2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">th2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">df2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>For more information on these classes and all of their methods, see the reference documentation by running <code><a href="../reference/Client.html">?Client</a></code> or <code><a href="../reference/TableHandle.html">?TableHandle</a></code>.</p>
</div>
<div class="section level2">
<h2 id="real-time-data-analysis">Real-time data analysis<a class="anchor" aria-label="anchor" href="#real-time-data-analysis"></a>
</h2>
<p>Since TableHandles are references to tables living on the Deephaven server, they may refer to streaming tables, or tables that are receiving new data periodically(typically once per second). Here’s a simple example of creating a table that adds a new row every second:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">th3</span> <span class="op">&lt;-</span> <span class="va">client</span><span class="op">$</span><span class="fu">time_table</span><span class="op">(</span><span class="st">"PT1s"</span><span class="op">)</span><span class="op">$</span></span>
<span>  <span class="fu">update</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X = ii"</span>, <span class="st">"Y = sin(X)"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>R objects like data frames or Dplyr tibbles do not have this streaming property - they are always static objects stored in memory. However, a TableHandle referring to a streaming table may be converted to a data frame or tibble at any time, and the resulting object will be a snapshot of the table at the time of conversion. This means that you can use the Deephaven R Client to perform real-time data analysis on streaming data! Here, we make a simple plot of the ticking table, and call it three times to demonstrate the dynamic nature of the table:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">th3</span><span class="op">)</span><span class="op">$</span><span class="va">X</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">th3</span><span class="op">)</span><span class="op">$</span><span class="va">Y</span>, type <span class="op">=</span> <span class="st">"l"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">th3</span><span class="op">)</span><span class="op">$</span><span class="va">X</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">th3</span><span class="op">)</span><span class="op">$</span><span class="va">Y</span>, type <span class="op">=</span> <span class="st">"l"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">th3</span><span class="op">)</span><span class="op">$</span><span class="va">X</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">th3</span><span class="op">)</span><span class="op">$</span><span class="va">Y</span>, type <span class="op">=</span> <span class="st">"l"</span><span class="op">)</span></span></code></pre></div>
<p>There are performance and memory considerations when pulling data from the server, so it is best to use the provided TableHandle methods to perform as much of your analysis as possible on the server, and to only pull the data when something <em>must</em> be done in R, like plotting or writing to a local file.</p>
</div>
<div class="section level2">
<h2 id="powerful-table-operations">Powerful table operations<a class="anchor" aria-label="anchor" href="#powerful-table-operations"></a>
</h2>
<p>Much of the power of Deephaven’s suite of table operations is achieved through the use of the <code>update_by()</code> and <code>agg_by()</code> methods. These table methods are important enough to warrant their own documentation pages, accessible by running <code><a href="../articles/update_by.html">vignette("update_by")</a></code> or <code><a href="../articles/agg_by.html">vignette("agg_by")</a></code>. These methods come with their own suites of functions, prefixed with <code>agg_</code> and <code>uby_</code> respectively, that are listed in their documentation pages. Running <code>ls("package:rdeephaven")</code> will reveal that most of the functions included in this package are for these methods, so it is important to get acquainted with them.</p>
</div>
<div class="section level2">
<h2 id="getting-help">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<p>While we’ve done our best to provide good documentation for this package, you may find you need more help than what this documentation has to offer. Please visit the official Deephaven Community Core <a href="https://deephaven.io/core/docs/tutorials/quickstart/" class="external-link">documentation</a> to learn more about Deephaven and to find comprehensive examples. Additionally, feel free to reach out to us on the Deephaven <a href="https://deephaven.io/slack" class="external-link">Community Slack channel</a> with any questions. We hope you find real-time data analysis in R to be as easy as possible.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Alex Peters.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
